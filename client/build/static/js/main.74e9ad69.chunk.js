(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{124:function(e,a,t){e.exports=t(166)},166:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(16),c=t.n(l),o=t(11),s=t(47),i=t(102),u=t(7),m=t.n(u),p=t(14),d=t(6),f=t(15),g=t(9),v=t.n(g),b=r.a.createContext(),E="LOGOUT",h={login:!1,id:null,complete:!1,username:null,avatar:null,lang:"eng",views:[],cache:{searchType:null,filters:null,sort:null,movies:null}};function y(e,a){switch(a.type){case"INIT":return a.payload;case"LOGOUT":return h;case"PROFIL":return Object(f.a)({},e);case"CHANGE_AVATAR":return Object(f.a)({},e,{avatar:a.payload});case"COMPLETE":return Object(f.a)({},e,{complete:!0});case"VIEW":return Object(f.a)({},e,{views:a.payload});case"LANG":return Object(f.a)({},e,{lang:a.payload});case"CACHE":return Object(f.a)({},e,{cache:a.payload});default:return e}}var O={navbar:{home:{eng:"Home",fr:"Accueil"},profil:{eng:"Profile",fr:"Profil"},logout:{eng:"Logout",fr:"D\xe9connexion"}},form:{placeholderName:{eng:"Name",fr:"Nom"},placeholderFirstname:{eng:"Firstname",fr:"Pr\xe9nom"},placeholderUsername:{eng:"Username",fr:"Identifiant"},placeholderMail:{eng:"Email",fr:"Email"},placeholderPassword:{eng:"Password",fr:"Mot de passe"},placeholderConfirm:{eng:"Confirm password",fr:"Confirmation du mot de passe"},labelImg:{eng:"Click or drag your avatar here",fr:"Cliquez ou d\xe9posez votre image ici"},submitModify:{eng:"Modify",fr:"Modifier"},emptyFields:{eng:"At least one field is empty",fr:"Au moins un des champs est vide"}},login:{slogan:{eng:"Login, set up yourself, enjoy your movie !",fr:"Connecte toi, installe toi, bonne s\xe9ance !"},loginToken:{eng:"You must validate your account before logging in, go to your mailbox.",fr:"Vous devez valider votre compte avant de vous connecter, rendez-vous sur votre bo\xeete mail."},loginPass:{eng:"Bad password.",fr:"Mauvais mot de passe."},loginUser:{eng:"Unknown user.",fr:"Utilisateur inconnu."},form:{connexion:{title:{eng:"SIGN IN",fr:"CONNEXION"},submitButton:{eng:"Login",fr:"Se connecter"},forgotPass:{eng:"Forgot your password ?",fr:"Mot de passe oubli\xe9 ?"}},registration:{title:{eng:"REGISTER",fr:"INSCRIPTION"},submitButton:{eng:"Create my account",fr:"Cr\xe9er mon compte"},mailActivate:{eng:"A confirmation email has been sent to you.",fr:"Un mail de confirmation vous a \xe9t\xe9 envoy\xe9."},mailValidate:{eng:"Your account is activated, you will be able to connect.",fr:"Votre compte est activ\xe9, vous allez pouvoir vous connecter."}},omniauth:{eng:"Connect with ",fr:"Connecte toi avec "},forgot:{back:{eng:" Back",fr:" Retour"},send:{eng:"Send",fr:"Envoyer"},title:{eng:"Enter your username, you will receive a reset mail",fr:"Rentre ton identifiant, tu recevras un mail de r\xe9initialisation \xe0 l'adresse que tu as indiqu\xe9"},mail:{eng:"An email has been sent to you, check your mailbox to republish your password and reconnect",fr:"Un mail vous a \xe9t\xe9 envoy\xe9, allez sur votre boite mail afin de r\xe9\xe9diter votre mot de passe et de vous reconnecter"},alreadyMail:{eng:"You have already been sent a mail to re-edit your password and log in again",fr:"Un mail vous d\xe9j\xe0 \xe9t\xe9 envoy\xe9 afin de r\xe9\xe9diter votre mot de passe et de vous reconnecter"}}}},library:{complete:{fr:"Veuillez compl\xe9ter votre ",eng:"Please complete your "},profil:{fr:"Profil",eng:"Profile"},menu:{popular:{eng:"Top trends",fr:"Top tendances"},lastadded:{eng:"Last added",fr:"Les derniers ajouts"},random:{eng:"Random",fr:"Al\xe9atoire"},search:{eng:"Search",fr:"Rechercher"}},filterAndSort:{gender:{eng:"GENDERS",fr:"GENRES"},year:{eng:"YEARS",fr:"ANN\xc9ES"},ratings:{eng:"RATINGS",fr:"SCORES"},name:{eng:"NAME",fr:"NOM"},sortLabel:{eng:"ORDER BY : ",fr:"TRIER PAR : "},none:{eng:"none",fr:"aucun"}}},movie:{backlink:{eng:"<- Back to catalogue",fr:"<- Retour au catalogue"},year:{eng:"Release date",fr:"Date de sortie"},director:{eng:"Director",fr:"Directeur"},actor:{eng:"Actors",fr:"Acteurs"},gender:{eng:"Gender",fr:"Genre"},form:{title:{eng:"Comments",fr:"Commentaires"},textarea:{eng:"Write your comment here",fr:"\xc9crivez votre commentaire"},submit:{eng:"Post",fr:"Envoyer"}},tTable:{quality:{eng:"Quality",fr:"Qualit\xe9"},language:{eng:"Language",fr:"Langage"},link:{eng:"Link",fr:"Lien"}},subtitles:{eng:"Subtitles are available",fr:"Des sous-titres sont disponibles"}},profil:{personnal:{eng:"Personnal informations",fr:"Informations personnelles"},password:{eng:"Password",fr:"Mot de passe"},clear:{eng:"Clear",fr:"Effacer"},img:{eng:"Picture",fr:"Image"},imgdrop:{eng:"Click or drop your image here",fr:"Cliquez ou d\xe9posez votre image ici"},pwd:{eng:"Change your password",fr:"Modifier votre mot de passe"},history:{eng:"Watched movie history",fr:"Historique des films regard\xe9s"},pwdModify:{eng:"Your password has been updated.",fr:"Votre mot de passe a \xe9t\xe9 actualis\xe9."},update:{avatar:{eng:"Avatar successfuly updated",fr:"L'avatar a ete mis a jour"},complete:{eng:"Your profil is now completed",fr:"Votre profil est desormais complet"},general:{eng:"Settings are now update",fr:"Les parametres ont ete mis a jour"}}},error:{format:{eng:"Format is incorrect",fr:"Le format est incorrect"},size:{eng:"File size too big",fr:"La taille du fichier est trop grande"},length:{eng:"Too many caracters",fr:"Trop de caract\xe8res"},unknow:{eng:"An error occured, please try again",fr:"Une erreur est survenue, veuillez r\xe9essayer"},empty:{eng:"Empty field",fr:"Le champ est vide"},imTeapot:{eng:"Unknown error ...",fr:"Erreur inconnue rip"},unAuthorized:{eng:"Your session has expired please relog in",fr:"Votre session a expire, merci de vous reconnecter"},diff:{eng:"Passwords are differents",fr:"Les mots de passe sont differents"},alreadyTaken:{eng:"Already taken",fr:"Deja utilise"}},notFoundPage:{title:{eng:"This page no longer exists",fr:"Cette page n existe plus"},body:{eng:"You'll be redirected in few second",fr:"Vous serez redirige sur l'acceuil dans quelques secondes"}}};function w(){var e=Object(n.useState)(5),a=Object(d.a)(e,2),t=a[0],l=a[1],c=Object(n.useContext)(b).state.lang;return Object(n.useEffect)((function(){var e=setInterval((function(){l(t-1)}),1e3);return function(){clearInterval(e)}})),0===t&&Object(o.c)("/"),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,O.notFoundPage.title[c]),r.a.createElement("h2",null,"".concat(O.notFoundPage.body[c]," (").concat(t,")")))}var j=t(241),x=t(208),k=(t(46),t(69)),C=t(89),N=t(12),S=Object(C.a)((function(e){return{search:Object(k.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(N.d)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(N.d)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:{padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),backgroundColor:"rgba(190, 190, 190, 0.45)",borderTopLeftRadius:"0.3rem",borderTopRightRadius:"0.3rem"},dense:{marginTop:e.spacing(2)},menu:{width:200},button:{margin:e.spacing(1)},root:{flexGrow:1,display:"flex",flexWrap:"wrap"},paper:{width:"90%",margin:"auto",boxSizing:"border-box",padding:"20px"},control:{padding:e.spacing(2)},formControl:{margin:e.spacing(1),minWidth:120,color:"white",textColor:"white"},selectEmpty:{marginTop:e.spacing(2)},input:{color:"white"}}})),T=function(){var e=Object(s.useSnackbar)().enqueueSnackbar,a={autoHideDuration:3e3,preventDuplicate:!0,disableWindowBlurListener:!0};return{notifySuccess:function(t){return e(t,Object(f.a)({variant:"success"},a))},notifyError:function(t){return e(t,Object(f.a)({variant:"error"},a))}}};function L(e){var a=Object(n.useState)(e),t=Object(d.a)(a,2),r=t[0],l=t[1];return{value:r,onChange:function(e,a){l(a||e.target.value)}}}function I(e,a,t){var r=Object(n.useState)(null),l=Object(d.a)(r,2),c=l[0],o=l[1];return Object(n.useEffect)((function(){var n=document.getElementById(a);function r(e){return l.apply(this,arguments)}function l(){return(l=Object(p.a)(m.a.mark((function n(r){var l;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t===e){n.next=11;break}return n.prev=1,n.next=4,v.a.post("/auth/registration/".concat(a),{value:e});case 4:(l=n.sent).data.error?o(l.data.error):c&&o(null),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),o("error");case 11:case"end":return n.stop()}}),n,null,[[1,8]])})))).apply(this,arguments)}return n.addEventListener("blur",r),function(){n.removeEventListener("blur",r)}})),c}function F(e){var a=I(e.val.value,"lastname");return a?e.setError(!0):e.setError(!1),r.a.createElement(j.a,Object.assign({name:"lastname",type:"text"},e.val,{id:"lastname",label:O.form.placeholderName[e.state.lang],className:e.classe.textField,margin:"normal",variant:"filled",error:!!a,helperText:a&&O.error[a][e.state.lang]}))}function R(e){var a=I(e.val.value,"firstname");return a?e.setError(!0):e.setError(!1),r.a.createElement(j.a,Object.assign({name:"firstname",type:"text"},e.val,{id:"firstname",label:O.form.placeholderFirstname[e.state.lang],className:e.classe.textField,margin:"normal",variant:"filled",error:!!a,helperText:a&&O.error[a][e.state.lang]}))}function A(e){var a=I(e.val.value,"username",e.tmp);return a?e.setError(!0):e.setError(!1),r.a.createElement(j.a,Object.assign({name:"username",type:"text"},e.val,{id:"username",label:O.form.placeholderUsername[e.state.lang],className:e.classe.textField,margin:"normal",variant:"filled",error:!!a,helperText:a&&O.error[a][e.state.lang]}))}function P(e){var a=I(e.val.value,"mail",e.tmp);return a?e.setError(!0):e.setError(!1),r.a.createElement(j.a,Object.assign({name:"mail",type:"text"},e.val,{id:"mail",label:O.form.placeholderMail[e.state.lang],className:e.classe.textField,margin:"normal",variant:"filled",error:!!a,helperText:a&&O.error[a][e.state.lang]}))}function D(e){var a=I(e.val.value,"password");return a?e.setError(!0):e.setError(!1),r.a.createElement(j.a,Object.assign({name:"password",type:"password"},e.val,{id:"password",label:O.form.placeholderPassword[e.state.lang],className:e.classe.textField,margin:"normal",variant:"filled",error:!!a,helperText:a&&O.error[a][e.state.lang]}))}function B(e){var a=e.val,t=e.pwd,l=Object(n.useState)(null),c=Object(d.a)(l,2),o=c[0],s=c[1];return Object(n.useEffect)((function(){var n=document.getElementById("cfpassword");function r(e){return l.apply(this,arguments)}function l(){return(l=Object(p.a)(m.a.mark((function n(r){var l;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,v.a.post("/auth/registration/cfpassword",{cfpassword:a.value,password:t});case 3:(l=n.sent).data.error?(e.setError(!0),s(l.data.error)):o&&(e.setError(!1),s(null)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),s("An error occured.");case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))).apply(this,arguments)}return n.addEventListener("blur",r),function(){n.removeEventListener("blur",r)}})),r.a.createElement(j.a,Object.assign({name:"cfpassword",type:"password"},a,{id:"cfpassword",label:O.form.placeholderConfirm[e.state.lang],className:e.classe.textField,margin:"normal",variant:"filled",error:!!o,helperText:o&&O.error[o][e.state.lang]}))}var M=function(e){var a=S(),t=e.state,l=L(""),c=L(""),s=L(""),i=L(""),u=L(""),f=L(""),g=Object(n.useState)(""),b=Object(d.a)(g,2),E=b[0],h=b[1],y=Object(n.useState)(null),w=Object(d.a)(y,2),j=w[0],k=w[1],C=Object(n.useState)(null),N=Object(d.a)(C,2),I=N[0],M=N[1],_=Object(n.useRef)(null),U=T().notifyError;function z(){return(z=Object(p.a)(m.a.mark((function e(a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),e.prev=1,j||!I){e.next=17;break}return(n=new FormData).append("username",s.value),n.append("lastname",l.value),n.append("firstname",c.value),n.append("mail",i.value),n.append("password",u.value),n.append("cfpassword",f.value),n.append("file",I.file),e.next=13,v.a.post("/auth/registration",n);case 13:(r=e.sent).data.error?r.data.error.forEach((function(e){return U(O.error[e.error][t.lang])})):(h(O.login.form.registration.mailActivate[t.lang]),document.getElementsByClassName("formInfo")[1].style.display="none"),e.next=18;break;case 17:U(O.form.emptyFields[t.lang]);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(1),k(O.error.unknow[t.lang]);case 23:case"end":return e.stop()}}),e,null,[[1,20]])})))).apply(this,arguments)}return t.login?Object(o.c)("/"):r.a.createElement("div",{className:"identify"},E&&r.a.createElement("p",null,E),r.a.createElement("form",{className:"formInfo",onSubmit:function(e){return z.apply(this,arguments)}},r.a.createElement(F,{val:l,state:t,classe:a,setError:k}),r.a.createElement(R,{val:c,state:t,classe:a,setError:k}),r.a.createElement(A,{val:s,state:t,classe:a,setError:k}),r.a.createElement(P,{val:i,state:t,classe:a,setError:k}),r.a.createElement(D,{val:u,state:t,classe:a,setError:k}),r.a.createElement(B,{val:f,pwd:u.value,state:t,classe:a,setError:k}),r.a.createElement("div",{id:"drag",className:"user-img",onDrop:function(e){e.preventDefault();var a=e.dataTransfer.files[0];a&&M({file:a,preview:URL.createObjectURL(a)}),document.getElementById("drag").style.border="3px dashed black"},onDragOver:function(e){e.preventDefault(),document.getElementById("drag").style.border="3px dashed green"},onDragLeave:function(e){e.preventDefault(),document.getElementById("drag").style.border="3px dashed black"}},r.a.createElement("label",{htmlFor:"img",className:"textImgDrop"},O.profil.imgdrop[t.lang],r.a.createElement("br",null),"(1mo max, format: jpeg/jpg/png)",r.a.createElement("input",{type:"file",ref:_,onChange:function(){var e=_.current.files[0];e&&(e.size>1e6?U(O.error.size[t.lang]):e.type.match(/image\/?(png)|(jpg)|(jpeg)/)?M({file:e,preview:URL.createObjectURL(e)}):U(O.error.format[t.lang]))},id:"img",accept:"image/jpeg, image/jpg, image/png",style:{display:"none"}})),I&&I.preview&&r.a.createElement("img",{src:I.preview,id:"imgprev",alt:"preview"})),r.a.createElement(x.a,{type:"submit",variant:"contained",id:"sendRegister",color:"primary",className:a.button}," ",O.login.form.registration.submitButton[t.lang]," ")))},_=t(64),U=t(71),z=t.n(U),V=t(72),G=t.n(V),H=t(105),q=t.n(H);function W(e){var a=Object(n.useState)(e),t=Object(d.a)(a,2),r=t[0],l=t[1];return{value:r,onChange:function(e){l(e.target.value)},reset:function(){l("")}}}function Y(e){var a=function(e,a){var t=Object(n.useState)(null),r=Object(d.a)(t,2),l=r[0],c=r[1];return Object(n.useEffect)((function(){var t=document.getElementById("password");function n(e){return r.apply(this,arguments)}function r(){return(r=Object(p.a)(m.a.mark((function t(n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.a.post("/auth/registration/".concat(a),{value:e});case 3:(r=t.sent).data.error?c(r.data.error):l&&c(null),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),c("A error occured.");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}return t.addEventListener("blur",n),function(){t.removeEventListener("blur",n)}})),l}(e.val.value,"password");return a&&e.setErr(!0),r.a.createElement("div",{className:"divForm"},r.a.createElement(j.a,Object.assign({name:"password",type:"password"},e.val,{id:"password",label:O.form.placeholderPassword[e.state.lang],className:e.classe.textField,margin:"normal",variant:"filled",error:!!a,helperText:a&&O.error[a][e.state.lang]})))}function J(e){var a=e.val,t=e.pwd,l=Object(n.useState)(null),c=Object(d.a)(l,2),o=c[0],s=c[1];return Object(n.useEffect)((function(){var n=document.getElementById("cfpassword");function r(e){return l.apply(this,arguments)}function l(){return(l=Object(p.a)(m.a.mark((function n(r){var l;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,v.a.post("/auth/registration/cfpassword",{cfpassword:a.value,password:t});case 3:(l=n.sent).data.error?(s(l.data.error),e.setErr(!0)):o&&(e.setErr(!1),s(null)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),s("An error occured.");case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))).apply(this,arguments)}return n.addEventListener("blur",r),function(){n.removeEventListener("blur",r)}})),r.a.createElement("div",{className:"divForm"},r.a.createElement(j.a,Object.assign({name:"cfpassword",type:"password"},e.val,{id:"cfpassword",label:O.form.placeholderConfirm[e.state.lang],className:e.classe.textField,margin:"normal",variant:"filled",error:!!o,helperText:o&&O.error[o][e.state.lang]})))}var K=function(e){var a=S(),t=W(""),l=W(""),c=Object(n.useState)(!1),s=Object(d.a)(c,2),i=s[0],u=s[1],f=Object(n.useContext)(b).state,g=T(),E=g.notifySuccess,h=g.notifyError;function y(){return(y=Object(p.a)(m.a.mark((function a(n){var r;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),""!==t||""!==l){a.next=3;break}return a.abrupt("return",h(O.error.empty[f.lang]));case 3:if(!i){a.next=5;break}return a.abrupt("return");case 5:return a.prev=5,a.next=8,v.a.post("/auth/updatePass",{token:e.token,password:t.value,cfpassword:l.value});case 8:(r=a.sent).data.error?r.data.error.forEach((function(e){return h(O.error[e.error][f.lang])})):"user"===r.data.origin?(E(O.profil.pwdModify[f.lang]),t.reset(),l.reset()):(E(O.profil.pwdModify[f.lang]),Object(o.c)("/")),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(5),h(O.error.unknow[f.lang]);case 15:case"end":return a.stop()}}),a,null,[[5,12]])})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:"formInfo",onSubmit:function(e){return y.apply(this,arguments)}},r.a.createElement(Y,{val:{value:t.value,onChange:t.onChange},state:f,classe:a,setErr:u}),r.a.createElement(J,{val:{value:l.value,onChange:l.onChange},pwd:t.value,state:f,classe:a,setErr:u}),r.a.createElement(x.a,{type:"submit",variant:"contained",id:"sendRegister3",color:"primary",className:a.button}," ",O.form.submitModify[f.lang]," ")))},X=function(){var e=Object(s.useSnackbar)().enqueueSnackbar,a=Object(n.useContext)(b),t=a.state,r=a.dispatch,l=t.login,c=t.lang;return{handleHttpResponseError:function(a){401===a&&(e(O.error.unAuthorized[c],{variant:"error"}),l?r({type:E}):404===a?Object(o.c)("/404"):418===a&&e(O.error.imTeapot[c],{variant:"error"}))}}};var Q=t(32),Z=t(213),$=t(115),ee=t(214),ae=t(106),te=t.n(ae);function ne(e){var a=S(),t=e.displayData,l=e.activeTab,c=e.loader,s=Object(n.useState)(""),i=Object(d.a)(s,2),u=i[0],m=i[1],p=Object(n.useContext)(b).state;return p.login?p.complete?r.a.createElement("div",{className:"catalogue-bar"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t("search",u)}},r.a.createElement("div",{id:"div-searchBar",className:a.search},r.a.createElement("div",{className:a.searchIcon},r.a.createElement(te.a,null)),r.a.createElement($.a,{placeholder:O.library.menu.search[p.lang]+"...",classes:{root:a.inputRoot,input:a.inputInput},inputProps:{"aria-label":"search"},onChange:function(e){return m(e.target.value)}}))),r.a.createElement(Z.a,{item:!0},r.a.createElement(ee.a,{fullWidth:!0,color:"primary","aria-label":"outlined primary button group"},r.a.createElement(x.a,{id:"popular",variant:"popular"===l?"contained":"outlined",onClick:function(){return c||t("popular")}},O.library.menu.popular[p.lang]),r.a.createElement(x.a,{variant:"lastadded"===l?"contained":"outlined",id:"lastadded",className:"button",onClick:function(){return c||t("lastadded")}},O.library.menu.lastadded[p.lang]),r.a.createElement(x.a,{variant:"random"===l?"contained":"outlined",id:"random",className:"button",onClick:function(){return c||t("random")}},O.library.menu.random[p.lang])))):Object(o.c)("/profil"):r.a.createElement(w,null)}var re=t(245),le=t(114),ce=t(244),oe=t(211),se=t(215),ie=t(243),ue=t(240),me=t(217),pe=t(108),de=t.n(pe),fe=t(107),ge=t.n(fe);function ve(e){var a=S(),t=e.state,l=Object(n.useState)([]),c=Object(d.a)(l,2),o=c[0],s=c[1],i=e.tmp,u=e.movies,m=e.filters,p=e.setFilters,g=e.sort,v=e.setSort,b=Object(n.useState)([1900,2019]),E=Object(d.a)(b,2),h=E[0],y=E[1],w=Object(n.useState)([0,100]),j=Object(d.a)(w,2),x=j[0],k=j[1];function C(e){var a=Object(f.a)({},m);a[e.target.name].on=!a[e.target.name].on,p(a)}return Object(n.useEffect)((function(){m&&m.year&&m.year.value?y(m.year.value):y([1900,2019]),m&&m.ratings&&m.ratings.value?k(m.ratings.value):k([0,100])}),[m]),Object(n.useEffect)((function(){s((function(){var e=[];return u.forEach((function(a){return a.genre.forEach((function(a){e.includes(a)||e.push(a)}))})),e}))}),[u]),Object(n.useEffect)((function(){u&&i(function(e,a,t){var n=Object(Q.a)(e);a.gender.on&&a.gender.value.length>0&&(n=n.filter((function(e){return a.gender.value.every((function(a){return e.genre.includes(a)}))})));a.year.on&&a.year.value&&(n=n.filter((function(e){return e.year>=a.year.value[0]&&e.year<=a.year.value[1]})));a.ratings.on&&a.ratings.value&&(n=n.filter((function(e){return be(e.ratings)>=a.ratings.value[0]&&be(e.ratings)<=a.ratings.value[1]})));""!==t.value&&(n=function(e,a,t){return"name"===a?e.sort((function(e,a){for(var n=0;e.title.length<n&&a.title.length<n&&e.title.charCodeAt(n)===a.title.charCodeAt(n);)n++;return e.title.charCodeAt(n)>a.title.charCodeAt(n)?t?1:-1:t?-1:1})):"ratings"===a?e.sort((function(e,a){return e.ratings&&a.ratings?be(e.ratings)>be(a.ratings)?t?1:-1:t?-1:1:e.ratings&&!a.ratings?t?1:-1:t?-1:1})):"year"===a?t?e.sort((function(e,a){return e.year>a.year?1:-1})):e.sort((function(e,a){return e.year>a.year?-1:1})):e}(n,t.value,t.order));return n}(u,m,g))}),[m,u,i,g]),r.a.createElement("div",{className:"filters-container"},r.a.createElement("div",{className:a.root},r.a.createElement(Z.a,{item:!0,xs:12},r.a.createElement(le.a,{id:"paper1Cata",className:a.paper},r.a.createElement(se.a,{className:"labelSort",control:r.a.createElement(ce.a,{name:"gender",checked:m.gender.on,onChange:C,value:"checkedB",color:"primary"}),label:O.library.filterAndSort.gender[t.lang]}),m.gender.on&&r.a.createElement("ul",{className:"genderslist"},o.map((function(e,a){return r.a.createElement("li",{className:"genderL",style:{backgroundColor:m.gender.value.includes(e)?"#DFB220":""},key:a,onClick:function(){return function(e){m.gender.value.includes(e)?p(Object(f.a)({},m,{gender:{on:m.gender.on,value:m.gender.value.filter((function(a){return a!==e}))}})):p(Object(f.a)({},m,{gender:{on:m.gender.on,value:[].concat(Object(Q.a)(m.gender.value),[e])}}))}(e)}},e)}))),r.a.createElement(se.a,{className:"labelSort",control:r.a.createElement(ce.a,{name:"year",checked:m.year.on,onChange:C,value:"checkedB",color:"primary"}),label:O.library.filterAndSort.year[t.lang]}),m.year.on&&r.a.createElement(re.a,{className:"filters",min:1900,max:2019,step:1,value:h,onChange:function(e,a){return y(a)},onChangeCommitted:function(e,a){return p(Object(f.a)({},m,{year:{on:m.year.on,value:a}}))},valueLabelDisplay:"on","aria-labelledby":"range-slider"}),r.a.createElement(se.a,{className:"labelSort",control:r.a.createElement(ce.a,{name:"ratings",checked:m.ratings.on,onChange:C,value:"checkedB",color:"primary"}),label:O.library.filterAndSort.ratings[t.lang]}),m.ratings.on&&r.a.createElement(re.a,{className:"filters",min:0,max:100,step:1,value:x,onChange:function(e,a){return k(a)},onChangeCommitted:function(e,a){return p(Object(f.a)({},m,{ratings:{on:m.ratings.on,value:a}}))},valueLabelDisplay:"on","aria-labelledby":"range-slider"})))),r.a.createElement("div",{className:"orderContainer"},r.a.createElement(ge.a,{fontSize:"large",className:"arrow","aria-label":"up-arrow",onClick:function(){return v(Object(f.a)({},g,{order:!0}))}}),r.a.createElement(de.a,{fontSize:"large",className:"arrow","aria-label":"down-arrow",onClick:function(){return v(Object(f.a)({},g,{order:!1}))}}),r.a.createElement(oe.a,{id:"orderBy",variant:"filled",className:a.formControl},r.a.createElement(ie.a,{htmlFor:"filled-age-simple"},O.library.filterAndSort.sortLabel[t.lang]),r.a.createElement(ue.a,{value:g.value,onChange:function(e){return v(Object(f.a)({},g,{value:e.target.value}))},inputProps:{name:"Order by",id:"filled-Orderby-simple",className:a.input}},["name","year","ratings"].map((function(e,a){return r.a.createElement(me.a,{className:"MenuItem",value:e,key:a},function(e,a){var t=["name","year","ratings"];if(e===t[0])return O.library.filterAndSort.name[a];if(e===t[1])return O.library.filterAndSort.year[a];if(e===t[2])return O.library.filterAndSort.ratings[a]}(e,t.lang))}))))))}function be(e){var a=0;return e.forEach((function(e){a+=function(e){if("number"!==typeof e){var a=e.match(/\.|,/);a&&a[0]&&(e=e.split(a[0]).join("")),e=parseInt(e,10),isNaN(e)&&(e=0)}return e}(e.Value)})),e.length>0&&(a/=e.length,a=Math.round(a)),a}var Ee=t(112),he=t(218);function ye(e){var a=Object(n.useState)(e),t=Object(d.a)(a,2),r=t[0],l=t[1];return{value:r,onChange:function(e){l(e.target.value)}}}var Oe=function(e){var a=S(),t=ye(""),l=ye(""),c=e.state,s=Object(n.useState)({username:null,password:null,passwordForget:null}),i=Object(d.a)(s,2),u=i[0],f=i[1],g=Object(n.useState)(!1),b=Object(d.a)(g,2),E=b[0],h=b[1],y=T().notifyError;function w(){return(w=Object(p.a)(m.a.mark((function e(a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),""===t.value||""===l.value){e.next=14;break}return e.prev=2,e.next=5,v.a.post("/auth/login",{username:t.value,password:l.value});case 5:(n=e.sent).data.error?"!user"===n.data.error?f({username:O.login.loginUser[c.lang]}):"!pass"===n.data.error?f({password:O.login.loginPass[c.lang]}):"token"===n.data.error?y(O.login.loginToken[c.lang]):y(O.error.unknow[c.lang]):window.location.reload(!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),y(O.error.unknow[c.lang]);case 12:e.next=15;break;case 14:y(O.error.empty[c.lang]);case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function k(){return(k=Object(p.a)(m.a.mark((function e(a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,v.a.post("/auth/askForgetPass",{username:t.value});case 4:200===(n=e.sent).status?n.data.info?f({passwordForget:O.login.form.forgot.alreadyMail[c.lang]}):y(O.login.form.forgot.mail[c.lang]):y(O.error.unknow[c.lang]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),y(O.error.unknow[c.lang]);case 11:document.getElementsByClassName("formInfo")[0].style.display="none",document.getElementsByTagName("p")[2].style.display="none";case 13:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}return c.login?Object(o.c)("/"):E?r.a.createElement("div",{className:"identify"},r.a.createElement("p",null,O.login.form.forgot.title[c.lang]),r.a.createElement("form",{className:"formInfo",onSubmit:function(e){return k.apply(this,arguments)}},r.a.createElement(j.a,Object.assign({type:"text"},t,{id:"LoginForm",label:O.form.placeholderUsername[c.lang],className:a.textField,margin:"normal",variant:"filled",error:!!u.passwordForget,helperText:u.passwordForget})),r.a.createElement(x.a,{type:"submit",variant:"contained",id:"sendLogin",color:"primary",className:a.button},O.login.form.forgot.send[c.lang])),r.a.createElement(he.a,{id:"ForgotPwd",color:"primary",onClick:function(){return h(!1)},className:a.link}," \u2190 ",O.login.form.forgot.back[c.lang]," ")):r.a.createElement("div",{className:"identify"},r.a.createElement("form",{className:"formInfo",onSubmit:function(e){return w.apply(this,arguments)}},r.a.createElement(j.a,Object.assign({type:"text"},t,{id:"LoginForm",label:O.form.placeholderUsername[c.lang],className:a.textField,margin:"normal",variant:"filled",error:!!u.username,helperText:u.username})),r.a.createElement(j.a,Object.assign({type:"password"},l,{id:"PasswordForm",label:O.form.placeholderPassword[c.lang],className:a.textField,margin:"normal",variant:"filled",error:!!u.password,helperText:u.password})),r.a.createElement(x.a,{type:"submit",variant:"contained",id:"sendLogin2",color:"primary",className:a.button},O.login.form.connexion.submitButton[c.lang]),r.a.createElement(he.a,{id:"ForgotPwd",color:"primary",onClick:function(){return h(!0)},className:a.link},O.login.form.connexion.forgotPass[c.lang])))},we=t(239),je=t(219),xe=t(45),ke=t(238);function Ce(e){var a=e.children,t=e.value,n=e.index,l=Object(Ee.a)(e,["children","value","index"]);return r.a.createElement(xe.a,Object.assign({component:"div",role:"tabpanel",hidden:t!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},l),r.a.createElement(ke.a,{p:3},a))}var Ne=function(){var e=Object(n.useState)(0),a=Object(d.a)(e,2),t=a[0],l=a[1],c=Object(n.useContext)(b).state;return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"auth"},r.a.createElement("div",{className:"pres"},r.a.createElement("h1",null,"HYPERTUBE"),r.a.createElement("p",null,O.login.slogan[c.lang]),r.a.createElement("img",{src:"https://www.cinehorizons.net/sites/default/files/affiches/42.jpg",alt:"film 42"})),r.a.createElement("div",null,r.a.createElement(we.a,{className:"tabAuth",value:t,indicatorColor:"primary",onChange:function(e,a){l(a)},centered:!0},r.a.createElement(je.a,{label:O.login.form.connexion.title[c.lang]}),r.a.createElement(je.a,{label:O.login.form.registration.title[c.lang]})),r.a.createElement(Ce,{value:t,index:0},r.a.createElement(Oe,{state:c})),r.a.createElement(Ce,{value:t,index:1},r.a.createElement(M,{state:c})),r.a.createElement("div",{className:"signWith"},r.a.createElement("a",{href:"http://localhost:3001/auth/42",className:"fortytwo"},r.a.createElement("div",{className:"signLogo"},r.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/8/8d/42_Logo.svg",alt:"logo42"}),r.a.createElement("p",null,O.login.form.omniauth[c.lang],"42"))),r.a.createElement("a",{href:"http://localhost:3001/auth/instagram",className:"insta"},r.a.createElement("div",{className:"signLogo"},r.a.createElement("img",{src:"https://www.shareicon.net/download/2017/07/08/888203_photo.svg",alt:"logoInstagram"}),r.a.createElement("p",null,O.login.form.omniauth[c.lang],"Instagram"))),r.a.createElement("a",{href:"http://localhost:3001/auth/github",className:"github"},r.a.createElement("div",{className:"signLogo"},r.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/9/91/Octicons-mark-github.svg/768px-Octicons-mark-github.svg.png",alt:"logogithub"}),r.a.createElement("p",null,O.login.form.omniauth[c.lang],"Github")))))))},Se=t(172),Te=t(220),Le=Object(Se.a)((function(){return{root:{width:"300px",margin:"12px",backgroundColor:"rgba(190, 190, 190, 0.45)",boxShadow:"5px 3px 4px 0 rgba(255, 255, 255, 0.2), -7px 6px 10px 0 rgba(245, 245, 245, 0.18)",display:"flex",flexDirection:"column",alignItems:"center"},spacingTop:{marginTop:"8px"}}})),Ie=function(){var e=Le();return r.a.createElement("div",{className:e.root},r.a.createElement(Te.a,{variant:"rect",width:300,height:400}),r.a.createElement(Te.a,{className:e.spacingTop,variant:"rect",width:200,height:35}),r.a.createElement(Te.a,{className:e.spacingTop,variant:"rect",width:70,height:25}),r.a.createElement(Te.a,{variant:"rect",className:e.spacingTop,width:120,height:25}),r.a.createElement(Te.a,{variant:"rect",className:e.spacingTop,width:180,height:25}))};function Fe(e){var a=e[1].map((function(e){return e.imdb}));return e[0]=e[0].filter((function(e){return!a.includes(e.imdb)})),e[1].concat(e[0])}v.a.defaults.withCredentials=!0;var Re=t(221),Ae=t(212),Pe=t(222),De=t(171),Be=t(223),Me=t(224),_e=Object(C.a)({root:{margin:10,display:"flex",flexDirection:"column",alignItems:"center"},bigAvatar:{width:180,height:180},title:{margin:10}}),Ue=function(e){var a=e.username,t=Object(n.useState)(null),l=Object(d.a)(t,2),c=l[0],s=l[1],i=_e(),u=Object(n.useContext)(b).state;Object(n.useEffect)((function(){var e=v.a.CancelToken.source();return function(){var t=Object(p.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.a.get("/user/other/".concat(a),{cancelToken:e.token});case 3:n=t.sent,s(n.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),t.t0.response||v.a.isCancel(t.t0)&&e.cancel();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}()(),function(){e.cancel()}}),[a]);var f=c?r.a.createElement(r.a.Fragment,null,r.a.createElement(Re.a,{alt:"Stock avatar",src:c.avatar,className:i.bigAvatar}),r.a.createElement(xe.a,{variant:"h3"},c.username),r.a.createElement(xe.a,{variant:"h6"},"".concat(c.firstname," ").concat(c.lastname)),r.a.createElement(Ae.a,{className:i.root,component:"nav","aria-labelledby":"nested-list-subheader",subheader:r.a.createElement(Pe.a,{color:"primary",component:"div",id:"nested-list-subheader"},O.profil.history[u.lang])},c.views.map((function(e,a){return r.a.createElement(o.a,{key:a,to:"/film/".concat(e.imdb)},r.a.createElement(De.a,{button:!0},r.a.createElement(Be.a,{primary:e.title})))})))):r.a.createElement(Me.a,null);return r.a.createElement("div",{className:i.root},f)},ze=t(216),Ve=t(225),Ge=t(55),He=t.n(Ge),qe=function(e){var a=e.username,t=e.message,n=e.time,l=e.deletable,c=e.onDelete;return r.a.createElement("div",{className:He.a.root},l&&r.a.createElement("div",{className:He.a.closeIcon},r.a.createElement(ze.a,{onClick:c},r.a.createElement(Ve.a,null))),r.a.createElement(xe.a,{component:"p",className:He.a.timestamp,color:"textPrimary",variant:"caption"},n),r.a.createElement(xe.a,{className:He.a.username,color:"textPrimary",variant:"overline"},r.a.createElement(o.a,{to:"/membres/".concat(a)},a)),r.a.createElement(xe.a,{className:He.a.comment,color:"textPrimary",variant:"body1"},t))},We=t(226),Ye=t(82),Je=t.n(Ye);function Ke(e){var a=e.imdb,t=e.title,l=e.userid,c=e.username,o=e.state,s=Object(n.useState)(""),i=Object(d.a)(s,2),u=i[0],g=i[1],b=Object(n.useState)(null),E=Object(d.a)(b,2),h=E[0],y=E[1],w=Object(n.useState)(!1),j=Object(d.a)(w,2),k=j[0],C=j[1],N=T().notifyError,S=X().handleHttpResponseError;function L(){return(L=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""===u){e.next=12;break}return e.prev=2,e.next=5,v.a.post("/movie/comment/add",{imdb:a,id:l,comment:u});case 5:(n=e.sent).data&&!n.data.error?(y([Object(f.a)({},n.data,{username:c})].concat(Object(Q.a)(h))),g("")):N(O.error.format[o.lang]),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),e.t0.response?S(e.t0.response.status):N(O.error.unknow[o.lang]);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function I(){return(I=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.post("/movie/comment/delete",{imdb:a,id:t.userId,commentId:t._id});case 3:200===e.sent.status&&y(h.filter((function(e){return e._id!==t._id}))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0.response?S(e.t0.response.status):N(O.error.unknow[o.lang]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){var e=v.a.CancelToken.source();function n(){return(n=Object(p.a)(m.a.mark((function n(){var r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,v.a.get("/movie/comment/display?imdb=".concat(a,"&title=").concat(t),{cancelToken:e.token});case 3:(r=n.sent).data&&y(r.data),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),v.a.isCancel(n.t0)?e.cancel():C("unknow");case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))).apply(this,arguments)}return h||function(){n.apply(this,arguments)}(),function(){e.cancel()}}),[h,a,t]),r.a.createElement("div",{className:Je.a.root},k,r.a.createElement("form",{onSubmit:function(e){return L.apply(this,arguments)}},r.a.createElement(xe.a,{variant:"h4",color:"textPrimary"},O.movie.form.title[o.lang]),r.a.createElement("textarea",{className:Je.a.commentPost,placeholder:O.movie.form.textarea[o.lang],value:u,onChange:function(e){return g(e.target.value)},onKeyDown:function(e){if("Enter"===e.key&&!e.shiftKey){e.preventDefault();var a=new MouseEvent("click");a.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),document.getElementById("submit-comment").dispatchEvent(a)}},rows:"5",cols:"80"}),r.a.createElement(x.a,{id:"submit-comment",type:"submit",variant:"contained",color:"primary"},O.movie.form.submit[o.lang])),r.a.createElement(We.a,{variant:"fullWidth",style:{marginTop:20,marginBottom:20}}),r.a.createElement("div",null,h&&h.map((function(e,a){return r.a.createElement(qe,{key:a,username:e.username,time:Xe(e.date),message:e.content,deletable:e.username===c,onDelete:function(){return function(e){return I.apply(this,arguments)}(e)}})}))))}function Xe(e){var a=new Date(e);return"".concat(a.getHours(),":").concat(a.getMinutes()," - ").concat(a.getDate(),"/").concat(a.getMonth(),"/").concat(a.getFullYear())}var Qe=t(227),Ze=t(228),$e=t(229),ea=t(230),aa=t(231),ta=t(58),na=t.n(ta),ra=t(54),la=t.n(ra),ca=t(232),oa=Object(C.a)((function(e){return{root:{minWidth:"360px",maxWidth:"800px",marginTop:e.spacing(3),marginLeft:"auto",marginRight:"auto",overflowX:"auto"},table:{width:"100%"},langFlag:{width:"20px"}}}));function sa(e){var a=e.torrentList,t=e.onClickOnView,n=e.state,l=oa();return r.a.createElement(le.a,{className:l.root},r.a.createElement(Qe.a,{className:l.table},r.a.createElement(Ze.a,null,r.a.createElement($e.a,null,r.a.createElement(ea.a,null,O.movie.tTable.quality[n.lang]),r.a.createElement(ea.a,null,"Seeds"),r.a.createElement(ea.a,null,"Peers"),r.a.createElement(ea.a,null,O.movie.tTable.language[n.lang]),r.a.createElement(ea.a,null,O.movie.tTable.link[n.lang]))),r.a.createElement(aa.a,null,a.map((function(e){return r.a.createElement($e.a,{key:e.hash||e.magnet},r.a.createElement(ea.a,null,e.quality),r.a.createElement(ea.a,null,e.seeds),r.a.createElement(ea.a,null,e.peers),r.a.createElement(ea.a,null,r.a.createElement("img",{className:l.langFlag,src:ia(e.lang),alt:e.lang})),r.a.createElement(ea.a,null,r.a.createElement(ze.a,{onClick:function(){return t(e)}},r.a.createElement(ca.a,null))))})))))}function ia(e){switch(e.toLowerCase()){case"english":case"eng":return la.a;case"fre":case"french":case"fr":return na.a;default:return la.a}}var ua=t(233),ma=t(111),pa=t(235),da=t(236),fa=t(234),ga=t(237),va=Object(C.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},langSwitch:{width:"40px",height:"100%"},langImg:{width:"30px"}}})),ba=function(e){var a=e.auth,t=e.onChangeLang,l=e.onClickLogout,c=e.lang,s=va(),i=Object(ua.a)("(max-width:600px)"),u=Object(n.useState)(null),m=Object(d.a)(u,2),p=m[0],f=m[1],g=Object(n.useState)(""),v=Object(d.a)(g,2),b=v[0],E=v[1];Object(n.useEffect)((function(){!1===!!i&&"accountMenu"===b&&(E(""),f(null))}),[i,b]);var h=function(){return f(null)},y=[{name:"eng",selected:"eng"===c,img:la.a},{name:"fr",selected:"fr"===c,img:na.a}],w=function(e,a){f(e.currentTarget),E(a)},j=r.a.createElement(r.a.Fragment,null,r.a.createElement(ze.a,{onClick:function(e){return w(e,"langMenu")}},r.a.createElement("img",{className:s.langImg,src:"eng"===c?la.a:na.a,alt:c.name})),r.a.createElement(ma.a,{id:"lang-menu",anchorEl:p,keepMounted:!0,open:!!p&&"langMenu"===b,onClose:h},y.map((function(e){return r.a.createElement(me.a,{key:e.name,onClick:function(){return a=e.name,t(a),void h();var a},selected:e.selected},r.a.createElement("img",{className:s.langImg,src:e.img,alt:e.name}))})))),k=i?r.a.createElement(r.a.Fragment,null,r.a.createElement(ze.a,{onClick:function(e){return w(e,"accountMenu")}},r.a.createElement(fa.a,null)),r.a.createElement(ma.a,{id:"lang-menu",anchorEl:p,keepMounted:!0,open:!!p&&"accountMenu"===b,onClose:h,onClick:h},r.a.createElement(me.a,null,r.a.createElement(o.a,{to:"/profil"},O.navbar.profil[c])),r.a.createElement(me.a,{onClick:l},O.navbar.logout[c]))):r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,{to:"/profil"},r.a.createElement(x.a,null,O.navbar.profil[c])),r.a.createElement(x.a,{onClick:l,color:"inherit"},O.navbar.logout[c]));return r.a.createElement("header",{className:s.root},r.a.createElement(pa.a,{position:"static"},r.a.createElement(da.a,null,r.a.createElement(o.a,{to:"/"},r.a.createElement(ze.a,{edge:"start",className:s.menuButton,color:"inherit","aria-label":"menu"},r.a.createElement(ga.a,null))),r.a.createElement(xe.a,{variant:"h6",className:s.title},i?"#HPTB":"HYPERTUBE"),j,a&&k)))};var Ea=function(e){var a=e.children,t=Object(n.useContext)(b),l=t.state,c=t.dispatch;function s(){return(s=Object(p.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.id){e.next=12;break}return e.prev=1,e.next=4,v.a.post("/user/editLang/".concat(l.id,"/").concat(a));case 4:200===e.sent.status&&c({type:"LANG",payload:a}),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:e.next=13;break;case 12:c({type:"LANG",payload:a});case 13:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function i(){return(i=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get("/auth/logout");case 3:200===e.sent.status&&(c({type:"LOGOUT"}),Object(o.c)("/")),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return r.a.createElement("div",null,r.a.createElement(ba,{auth:l.login,onChangeLang:function(e){return s.apply(this,arguments)},onClickLogout:function(){return i.apply(this,arguments)},lang:l.lang}),r.a.createElement("main",null,a))};c.a.render(r.a.createElement(i.a,{theme:Object(_.a)({palette:{primary:{light:z.a[600],main:z.a[700],dark:z.a[800]},secondary:{light:G.a[300],main:G.a[700],dark:G.a[800]},error:q.a}})},r.a.createElement((function(e){var a=r.a.useReducer(y,h),t=Object(d.a)(a,2),l=t[0],c=t[1],o={state:l,dispatch:c};return Object(n.useEffect)((function(){var e=v.a.CancelToken.source();return Object(p.a)(m.a.mark((function a(){var t;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,v.a.get("/auth");case 3:"OK"!==(t=a.sent).data&&c({type:"INIT",payload:Object(f.a)({},t.data,{login:!0})}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),v.a.isCancel(a.t0)&&e.cancel();case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))(),function(){e.cancel()}}),[]),r.a.createElement(b.Provider,{value:o},e.children)}),null,r.a.createElement(s.SnackbarProvider,{maxSnack:3},r.a.createElement(Ea,null,r.a.createElement(o.b,null,r.a.createElement((function(){var e=Object(n.useContext)(b),a=e.state,t=e.dispatch,l=Object(n.useState)([]),c=Object(d.a)(l,2),s=c[0],i=c[1],u=Object(n.useState)(1),f=Object(d.a)(u,2),g=f[0],E=f[1],h=Object(n.useState)("popular"),y=Object(d.a)(h,2),w=y[0],j=y[1],x=Object(n.useState)(!1),k=Object(d.a)(x,2),C=k[0],N=k[1],S=Object(n.useState)(null),L=Object(d.a)(S,2),I=L[0],F=L[1],R=Object(n.useState)({year:{on:!1,value:null},ratings:{on:!1,value:null},gender:{on:!1,value:[]}}),A=Object(d.a)(R,2),P=A[0],D=A[1],B=Object(n.useState)({value:"",order:!0}),M=Object(d.a)(B,2),_=M[0],U=M[1],z=X().handleHttpResponseError,V=T().notifyError,G=Object(n.useRef)(!1);function H(e,a){return q.apply(this,arguments)}function q(){return(q=Object(p.a)(m.a.mark((function e(t,n){var r,l,c,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.a.CancelToken,l=r.source(),N(!0),G.current=!0,t!==w&&(j(t),E(1),i([]),D({year:{on:!1,value:null},ratings:{on:!1,value:null},gender:{on:!1,value:[]}}),U({value:"",order:!0})),c=function(){switch(t){case"popular":return"/library?page=".concat(n||1);case"lastadded":return"/library/lastadded?page=".concat(n||1);case"random":return"/library/random";case"search":return"/library/search?name=".concat(n||"42");default:return"/library?page=".concat(n||1)}}(),e.prev=6,e.next=9,v.a.get(c,{cancelToken:l.token});case 9:(o=e.sent).data&&G.current&&(i("search"!==t&&t===w&&s?Fe([o.data,s]):o.data),N(!1),G.current=!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(6),v.a.isCancel(e.t0)&&l.cancel(),e.t0.response?z(e.t0.response.status):V(O.error.unknow[a.lang]);case 17:case"end":return e.stop()}}),e,null,[[6,13]])})))).apply(this,arguments)}function W(){return(W=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.post("/movie/add?imdb=".concat(t.imdb),t);case 3:200===e.sent.status&&Object(o.c)("/film/".concat(t.imdb)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0.response?z(e.t0.response.status):V(O.error.unknow[a.lang]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){I&&t({type:"CACHE",payload:{searchType:w,filters:P,sort:_,movies:s}})}),[I,t,P,s,w,_]),Object(n.useEffect)((function(){a.cache&&!I&&a.cache.movies&&(i(a.cache.movies),D(a.cache.filters),j(a.cache.searchType),U(a.cache.sort))}),[a.cache,I]),Object(n.useEffect)((function(){function e(e){var t=document.documentElement,n=document.body,r="scrollTop",l="scrollHeight";(t[r]||n[r])/((t[l]||n[l])-t.clientHeight)*100>=99&&!C&&"search"!==w&&a.login&&a.complete&&(E(g+1),H(w,g+1))}return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}})),Object(n.useEffect)((function(){return function(){G.current&&(G.current=!1)}}),[G]),a.login?a.complete?r.a.createElement(r.a.Fragment,null,r.a.createElement(ne,{displayData:H,activeTab:w,loader:C}),r.a.createElement(ve,{state:a,movies:s,tmp:F,filters:P,setFilters:D,sort:_,setSort:U}),r.a.createElement("ul",{className:"gallery"},I&&I.map((function(e,t){return r.a.createElement("li",{key:t,className:"miniature",onClick:function(){return function(e){return W.apply(this,arguments)}(e)}},r.a.createElement("img",{src:e.image,alt:"cover".concat(t)}),r.a.createElement("h2",{className:"movie-title"},e.title),r.a.createElement("span",{className:"year"},"(",e.year,")"),r.a.createElement("ul",{className:"ratings"},e.ratings&&e.ratings.map((function(e,a){return r.a.createElement("li",{key:a},e.Source," : ",r.a.createElement("span",{className:"rate-value"},e.Value))}))),a.views.includes(e.title)&&r.a.createElement("span",{role:"img","aria-label":"down-arrow"},"\ud83d\ude0e"))})),C&&Object(Q.a)(Array(6)).map((function(e,a){return r.a.createElement(Ie,{key:a})})))):r.a.createElement("p",null,O.library.complete[a.lang],r.a.createElement(o.a,{className:"link",to:"/profil"},O.library.profil[a.lang])):r.a.createElement(Ne,null)}),{path:"/"}),r.a.createElement((function(e){var a=S(),t=Object(n.useContext)(b),l=t.state,c=t.dispatch,s=l.lang,i=Object(n.useState)({username:"",lastname:"",firstname:"",mail:"",lang:"",avatar:""}),u=Object(d.a)(i,2),g=u[0],E=u[1],h=Object(n.useState)({username:"",mail:""}),y=Object(d.a)(h,2),j=y[0],k=y[1],C=Object(n.useState)(null),N=Object(d.a)(C,2),L=N[0],I=N[1],D=Object(n.useRef)(null),B=Object(n.useState)(null),M=Object(d.a)(B,2),_=M[0],U=M[1],z=Object(n.useState)(!1),V=Object(d.a)(z,2),G=V[0],H=V[1],q=T(),W=q.notifySuccess,Y=q.notifyError,J=X().handleHttpResponseError;function Q(e,a){return Z.apply(this,arguments)}function Z(){return(Z=Object(p.a)(m.a.mark((function e(a,t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),"user"===t?n={username:g.username,lastname:g.lastname,firstname:g.firstname,mail:g.mail}:"img"===t&&_?(n=new FormData).append("file",_.file):"mdp"===t&&(n={password:g.password,cfpassword:g.password}),!n||L){e.next=13;break}return e.prev=3,e.next=6,v.a.post("/user/me/".concat(l.id,"/").concat(t),n);case 6:(r=e.sent).data&&!r.data.error&&(r.data.complete&&!l.complete&&(W(O.profil.update.complete[s]),c({type:"COMPLETE"})),r.data.avatar!==l.avatar?(W(O.profil.update.avatar[s]),c({type:"CHANGE_AVATAR",payload:r.data.avatar})):(g.username===j.username&&g.mail===j.mail||k({username:g.username,mail:g.mail}),W(O.profil.update.general[s])),H(!0)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),e.t0.response?J(e.t0.response.status):I(!0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}function $(e){"lastname"===e.target.name&&E(Object(f.a)({},g,{lastname:e.target.value})),"firstname"===e.target.name&&E(Object(f.a)({},g,{firstname:e.target.value})),"mail"===e.target.name&&E(Object(f.a)({},g,{mail:e.target.value})),"lang"===e.target.name&&E(Object(f.a)({},g,{lang:e.target.value})),"username"===e.target.name&&E(Object(f.a)({},g,{username:e.target.value})),"password"===e.target.name&&E(Object(f.a)({},g,{password:e.target.value})),"cfpassword"===e.target.name&&E(Object(f.a)({},g,{cfpassword:e.target.value}))}return Object(n.useEffect)((function(){var e=document.documentElement,a="scrollTop";0!==e[a]&&(e[a]=0)}),[]),Object(n.useEffect)((function(){var e=v.a.CancelToken.source();function a(){return(a=Object(p.a)(m.a.mark((function a(){var t;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,v.a.get("/user/me/".concat(l.id),{cancelToken:e.token});case 3:(t=a.sent).data&&!t.data.error?(E(Object(f.a)({},t.data,{cfpassword:""})),k({username:t.data.username,mail:t.data.mail})):I(O.error.unknow[l.lang]),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),v.a.isCancel(a.t0)&&e.cancel(),I(O.error.unknow[l.lang]);case 11:case"end":return a.stop()}}),a,null,[[0,7]])})))).apply(this,arguments)}return l.id&&function(){a.apply(this,arguments)}(l.id),function(){e.cancel()}}),[l.id,l.lang]),Object(n.useEffect)((function(){var e;return G&&(e=setTimeout((function(){return H(!1)}),4e3)),function(){e&&clearTimeout(e)}}),[G]),l.login?r.a.createElement("div",{className:"account"},r.a.createElement("h1",null,l.username),l.avatar&&r.a.createElement("img",{src:l.avatar,alt:"profilPic",className:"avatarAccount"}),r.a.createElement("h2",null," ",O.profil.personnal[l.lang]," "),r.a.createElement("form",{className:"formInfo",onSubmit:function(e){return Q(e,"user")}},r.a.createElement(A,{val:{value:g.username||"",onChange:$},state:l,classe:a,setError:I,tmp:j.username}),r.a.createElement(F,{val:{value:g.lastname||"",onChange:$},state:l,classe:a,setError:I}),r.a.createElement(R,{val:{value:g.firstname||"",onChange:$},state:l,classe:a,setError:I}),r.a.createElement(P,{val:{value:g.mail||"",onChange:$},state:l,classe:a,setError:I,tmp:j.mail}),r.a.createElement(x.a,{type:"submit",variant:"contained",id:"sendRegister",color:"primary",className:a.button}," ",O.form.submitModify[l.lang]," ")),r.a.createElement("h2",null,O.profil.img[l.lang]),r.a.createElement("form",{className:"formInfo",onSubmit:function(e){return Q(e,"img")}},r.a.createElement("div",{id:"drag",className:"user-img",onDrop:function(e){e.preventDefault();var a=e.dataTransfer.files[0];a&&U({file:a,preview:URL.createObjectURL(a)}),document.getElementById("drag").style.border="3px dashed black"},onDragOver:function(e){e.preventDefault(),document.getElementById("drag").style.border="3px dashed green"},onDragLeave:function(e){e.preventDefault(),document.getElementById("drag").style.border="3px dashed black"}},r.a.createElement("label",{htmlFor:"img"},O.profil.imgdrop[l.lang],r.a.createElement("br",null),"(1mo max, format: jpeg/jpg/png)",r.a.createElement("input",{type:"file",ref:D,onChange:function(){var e=D.current.files[0];e&&(e.size>1e6?Y(O.error.size[l.lang]):e.type.match(/image\/?(png)|(jpg)|(jpeg)/)?U({file:e,preview:URL.createObjectURL(e)}):Y(O.error.format[l.lang]))},id:"img",accept:"image/jpeg, image/jpg, image/png",style:{display:"none"}}),L&&r.a.createElement("p",{className:"error"},L))),_&&_.preview&&r.a.createElement("img",{src:_.preview,id:"imgprev",alt:"preview"}),r.a.createElement(x.a,{type:"submit",variant:"contained",id:"sendRegister2",color:"primary",className:a.button}," ",O.login.form.forgot.send[l.lang]," ")),r.a.createElement("h2",null,O.profil.pwd[l.lang]),r.a.createElement(K,{token:l.id}),r.a.createElement("h2",null,O.profil.history[l.lang]),r.a.createElement("ul",null,l.views&&l.views.map((function(e,a){return r.a.createElement("li",{key:a},r.a.createElement(o.a,{className:"link",to:"/film/".concat(e.imdb)},e.title))}))),r.a.createElement(x.a,{onClick:function(){l.views.length>0&&c({type:"VIEW",payload:[]}),v.a.post("/user/deleteview",{id:l.id})},variant:"contained",id:"sendclear",color:"primary",className:a.button}," ",O.profil.clear[l.lang]," ")):r.a.createElement(w,null)}),{path:"/profil"}),r.a.createElement((function(e){var a=e.imdb,t=Object(n.useContext)(b),l=t.state,c=t.dispatch,s=Object(n.useState)(null),i=Object(d.a)(s,2),u=i[0],f=i[1],g=Object(n.useState)(null),E=Object(d.a)(g,2),h=E[0],y=E[1],j=Object(n.useState)(null),k=Object(d.a)(j,2),C=k[0],N=k[1],S=Object(n.useState)(""),T=Object(d.a)(S,2),L=T[0],I=T[1],F=X().handleHttpResponseError;function R(){return(R=Object(p.a)(m.a.mark((function e(t,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.includes("magnet")?y("http://localhost:3001/movie/watch/".concat(t)+"&imdb=".concat(a,"&quality=").concat(n)):y("http://localhost:3001/movie/watch/".concat(t,"?")+"imdb=".concat(a,"&quality=").concat(n)),e.prev=1,e.next=4,v.a.get("/movie/subtitles/?imdb=".concat(a));case 4:(r=e.sent).data&&N(r.data),l.views.find((function(e){return e.title===u.title}))||(v.a.post("/user/addview",{id:l.id,title:u.title,imdb:a}),c({type:"VIEW",payload:[].concat(Object(Q.a)(l.views),[{imdb:a,title:u.title}])})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),e.t0.response&&F(e.t0.response.status);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){var e,a=document.getElementsByClassName("subtitles")[0];return a&&(e=setTimeout((function(){a.style.display="none"}),3e3)),function(){e&&clearTimeout(e)}})),Object(n.useEffect)((function(){var e=v.a.CancelToken.source();function t(){return(t=Object(p.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.a.get("/movie/info/".concat(a),{cancelToken:e.token});case 3:(n=t.sent).data?f(n.data.data):Object(o.c)("/404"),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),v.a.isCancel(t.t0)&&e.cancel(),Object(o.c)("/404");case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}return a&&function(){t.apply(this,arguments)}(),function(){e.cancel()}}),[a]),Object(n.useEffect)((function(){var e=v.a.CancelToken.source();function a(){return(a=Object(p.a)(m.a.mark((function a(t){var n;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,v.a.post("/movie/translate",{text:t},{cancelToken:e.token});case 3:(n=a.sent).data.text?I(n.data.text):I(t),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),v.a.isCancel(a.t0)&&e.cancel(),I(t);case 11:case"end":return a.stop()}}),a,null,[[0,7]])})))).apply(this,arguments)}return u&&("fr"===l.lang?function(e){a.apply(this,arguments)}(u.synopsis):I(u.synopsis)),function(){e.cancel()}}),[u,l.lang]),l.login?l.complete?u?r.a.createElement(r.a.Fragment,null,r.a.createElement(x.a,{style:{margin:"24px 0 0 16px"},onClick:function(){Object(o.c)("/")},variant:"contained"},O.movie.backlink[l.lang]),r.a.createElement(xe.a,{variant:"h1"},u.title),r.a.createElement("div",{className:"video"},h?r.a.createElement("video",{key:h,width:"640",height:"320",controls:!0,autoPlay:!0},r.a.createElement("source",{src:h}),C&&C.map((function(e,a){return r.a.createElement("track",{key:a,kind:"subtitles",src:e.path,srcLang:e.lang})}))):r.a.createElement("img",{src:u.image,alt:"".concat(u.title,"-cover")})),C&&r.a.createElement("div",{className:"subtitles"},r.a.createElement("span",{role:"img","aria-label":"icon"},"\u21aa")," ",O.movie.subtitles[l.lang]),h&&r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("img",{src:u.image,alt:"".concat(u.title,"-cover"),style:{width:"100px",margin:"auto"}})),r.a.createElement(sa,{torrentList:u.torrents,onClickOnView:function(e){return function(e,a){return R.apply(this,arguments)}(e.hash||e.magnet,e.quality)},state:l}),r.a.createElement("ul",{className:"movie-details"},r.a.createElement("li",{key:"synopsis"},L),r.a.createElement("li",{key:"year"},O.movie.year[l.lang],": ",u.year),r.a.createElement("li",{key:"director"},O.movie.director[l.lang],": ",u.director),r.a.createElement("li",{key:"actors"},O.movie.actor[l.lang],": ",u.actors),r.a.createElement("li",{key:"genre"},O.movie.gender[l.lang],":",r.a.createElement("ul",null,"/ ",u.genre.map((function(e,a){return r.a.createElement("span",{key:a},e," / ")})))),r.a.createElement("li",null,"Box office : ",u.boxoffice)),r.a.createElement(Ke,{imdb:a,title:u.title,userid:l.id,username:l.username,state:l})):r.a.createElement(Me.a,null):r.a.createElement("p",null,"Veuillez completer votre",r.a.createElement(o.a,{to:"/profil"},"profil")):r.a.createElement(w,null)}),{path:"/film/:imdb"}),r.a.createElement(K,{path:"/motdepasse/:token"}),r.a.createElement((function(e){var a=Object(n.useContext)(b).state,t=Object(n.useState)(!1),l=Object(d.a)(t,2),c=l[0],s=l[1],i=Object(n.useState)(5),u=Object(d.a)(i,2),f=u[0],g=u[1];function E(){return(E=Object(p.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.a.get("/auth/activate/".concat(e.token));case 3:(n=t.sent).data.error?s(n.data.error):s(O.login.form.registration.mailValidate[a.lang]),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),s(O.error.unknow[a.lang]);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){var e=setInterval((function(){g(f-1)}),1e3);return function(){clearInterval(e)}})),c||function(){E.apply(this,arguments)}(),0===f&&Object(o.c)("/"),e.token?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,c&&r.a.createElement("h2",null,c),r.a.createElement("p",null,f))):r.a.createElement(w,null)}),{path:"/activer/:token"}),r.a.createElement(Ue,{path:"/membres/:username"}),r.a.createElement(w,{default:!0})))))),document.getElementById("root"))},46:function(e,a,t){},54:function(e,a,t){e.exports=t.p+"static/media/flag_en.6f382b2d.png"},55:function(e,a,t){e.exports={root:"Comment_root__EDro2",timestamp:"Comment_timestamp__3INX5",username:"Comment_username__1MWqr",comment:"Comment_comment__JTTVc",closeIcon:"Comment_closeIcon__x4PoN"}},58:function(e,a,t){e.exports=t.p+"static/media/flag_fr.78e9f99b.png"},82:function(e,a,t){e.exports={root:"Comments_root__Z6M7q",commentPost:"Comments_commentPost__9eA_T"}}},[[124,1,2]]]);
//# sourceMappingURL=main.74e9ad69.chunk.js.map